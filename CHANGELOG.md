# Changelog

本文档记录 Vidall TV 的所有重要变更。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
版本号遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [Unreleased]

### 新增
- **搜索功能** - 支持按片名关键词模糊搜索
  - 实时搜索，输入即显示结果
  - 300ms 防抖优化，避免频繁触发
  - 搜索框清除按钮，快速清空搜索内容
  - 大小写不敏感搜索

- **筛选功能** - 多维度筛选媒体内容
  - 类型筛选：全部/电影/电视剧
  - 年份筛选：按上映年份筛选
  - 类别筛选：按影片类别（动作、科幻、剧情等）筛选
  - 支持组合筛选，多个条件同时使用

- **排序功能** - 灵活的排序方式
  - 最近更新：按扫描时间倒序（默认）
  - 按名称：支持中文排序
  - 按年份：按上映年份倒序
  - 按评分：按评分从高到低

- **筛选结果展示**
  - Grid 布局显示筛选结果
  - 显示结果数量统计
  - 空态提示：无结果时提示用户调整筛选条件
  - 一键重置所有筛选条件

- **用户体验优化**
  - 筛选按钮使用 bindMenu 实现下拉菜单
  - 激活状态蓝色高亮显示
  - 搜索防抖避免频繁触发
  - 清除按钮快速操作

- **测试和文档**
  - 添加 MediaLibraryFilter.test.ets 单元测试
  - 创建功能说明文档 docs/FILTER_AND_SEARCH.md
  - 创建项目 README.md
  - 创建 CHANGELOG.md

### 改进
- **MediaLibraryModel** - 状态管理增强
  - 新增 FilterCriteria 接口管理筛选条件
  - 新增 SortType 枚举定义排序方式
  - 实现 applyFilters() 方法处理筛选逻辑
  - 实现 sortList() 方法处理排序逻辑
  - 实现 updateFilter() 和 resetFilters() 方法
  - 提取所有类别和年份供筛选使用

- **MediaLibraryTab** - UI 交互增强
  - 新增搜索栏（搜索框 + 重置按钮）
  - 新增筛选条件行（排序、类型、年份、类别）
  - 新增筛选结果展示区域
  - 使用防抖优化搜索性能
  - 改进按钮交互体验

### 技术细节
- 使用 DebounceUtil 实现搜索防抖（300ms）
- 使用 bindMenu API 实现原生下拉菜单
- 响应式状态管理自动更新 UI
- 筛选逻辑在内存中完成，性能优秀
- Grid 布局支持大量数据展示
- 使用稳定 key 避免不必要的重渲染

### 符合 Issue #2 的 Acceptance Criteria
- ✅ 列表支持切换排序：最近更新/名称/年份/评分
- ✅ 分类：类型、年份、类别；可组合筛选
- ✅ 搜索：按片名关键词模糊匹配
- ✅ 结果使用 Grid 布局，空态与错误态可见
- ✅ 性能优化（防抖处理）
- ⏳ UI 焦点导航（待完善）
- ⏳ 结果分页/分批加载（待实现）

### 待完成
- [ ] 分页/分批加载支持
- [ ] 焦点导航优化
- [ ] 播放历史功能（未看完、最近播放）
- [ ] 高级筛选（评分范围、时长等）
- [ ] 搜索增强（演员、导演、剧情搜索）

## [0.1.0] - 基础版本

### 新增
- 文件源管理（本地存储、WebDAV）
- 视频扫描和索引
- TMDB 元数据刮削
- 基础播放功能
- 媒体库展示
- 电影和电视剧分类
- 合集归并（电视剧多集自动分组）
- 评分标签和年代分组展示

---

## 版本说明

### [Unreleased]
当前开发版本，包含未发布的新功能和改进。

### [0.1.0]
初始发布版本，包含基础的媒体管理和播放功能。
